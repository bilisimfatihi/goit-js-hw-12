{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst publicKey = '50720875-9e46c15e3f43f509a571f7064';\nconst url = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n    try {\n        const currentURL = `${url}?key=${publicKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n        const response = await axios.get(currentURL);\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst ul = document.querySelector('.gallery');\nconst loadMoreBtn = document.getElementById('load-more-btn');\nlet lightbox = new SimpleLightbox('.image-li a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nexport function createGallery(images) {\n  const appendHtml = images.map(({largeImageURL,webformatURL,tags,likes,views,comments,downloads}) => {\n      return `<li class=\"image-li\">\n           <a href=\"${largeImageURL}\"> <img class=\"li-img\" src=\"${\n        webformatURL\n      }\" alt=\"${tags.split(',').slice(0, 3).join(',')}\"> </a>\n          <div class=\"div-upper\">\n            <ul>\n            <li>\n              <div class=\"div-inner\"><b>Likes</b>\n            ${likes}</div>\n            </li>\n\n            <li>\n             <div class=\"div-inner\"><b>Views</b>\n            ${views}</div>\n            </li>\n\n            <li>\n              <div class=\"div-inner\"><b>Comments</b>\n            ${comments}</div>\n            </li>\n\n            <li>\n             <div class=\"div-inner\"><b>Downloads</b>\n            ${downloads}</div>\n            </li>\n\n            </ul>\n          </div>\n        </li>`;\n    }).join(\"\");\n  ul.insertAdjacentHTML(\"beforeend\", appendHtml);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    const ul = document.querySelector('.gallery');\n    if (ul) ul.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    document.querySelector('.loading')?.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    document.querySelector('.loading')?.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n  } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst keywordsEl = document.querySelector('input[name=\"keywords\"]');\nconst loadMoreBtn = document.getElementById('load-more-btn');\nlet keywords = \"\";\nlet currentPage = 1;\nconst limit = 40;\nlet totalPages = 0;\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  currentPage = 1;\n  keywords = keywordsEl.value.trim();\n  clearGallery();\n  showLoader();\n  hideLoadMoreButton();\n  if (!keywords) {\n    hideLoader();\n    return iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n      position: 'topRight',\n    });\n  }\n    \n  try {\n    const data = await fetchImages(keywords, currentPage);\n    totalPages = Math.ceil(data.totalHits / limit)\n    if (!data || !data.hits || data.hits.length === 0) {\n      hideLoader();\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      form.reset();\n      return;\n    }\n    createGallery(data.hits);\n\n    if (data.totalHits <= limit || currentPage >= totalPages) {\n      hideLoadMoreButton();\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n  \nloadMoreBtn.addEventListener('click', async (e) => {\n  currentPage++;\n  showLoader();\n\n  try {\n    const data = await fetchImages(keywords, currentPage);\n    \n    if (!data || !data.hits || data.hits.length === 0) {\n      hideLoader();\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      form.reset();\n      return;\n    }\n    createGallery(data.hits);\n\n    if (data.hits.length < limit || currentPage >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.info({\n        position: \"topRight\",\n        message: \"We're sorry, but you've reached the end of search results\"\n      });\n    } else {\n      showLoadMoreButton();\n    }\n\n    const firstCard = document.querySelector('.image-li');\n    if (firstCard) {\n      const { height: cardHeight } = firstCard.getBoundingClientRect();\n      window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["publicKey","url","fetchImages","query","page","perPage","currentURL","axios","error","ul","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","appendHtml","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","showLoader","_a","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","keywordsEl","keywords","currentPage","limit","totalPages","e","iziToast","data","firstCard","cardHeight"],"mappings":"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"}